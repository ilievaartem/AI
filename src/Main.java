public class Main {
    public static void main(String[] args) {
        final int NUM_LETTERS = 33;
        final int MATRIX_SIZE = 7;
        final int INPUT_SIZE = MATRIX_SIZE * MATRIX_SIZE;
        final double LEARNING_RATE = 0.1;
        final int MAX_EPOCHS = 10000;
        final double ERROR_THRESHOLD = 0.01;
        final double ACCURACY_THRESHOLD = 0.9;

        int[][] inputsList = {
                // А
                {
                        0,1,1,1,1,1,0,
                        1,0,0,0,0,0,1,
                        1,0,0,0,0,0,1,
                        1,1,1,1,1,1,1,
                        1,0,0,0,0,0,1,
                        1,0,0,0,0,0,1,
                        1,0,0,0,0,0,1
                },
                // Б
                {
                        1,1,1,1,1,1,0,
                        1,0,0,0,0,0,0,
                        1,1,1,1,1,1,0,
                        1,0,0,0,0,1,0,
                        1,0,0,0,0,1,0,
                        1,0,0,0,0,1,0,
                        1,1,1,1,1,1,0
                },
                // В
                {
                        0,1,1,1,1,1,0,
                        1,0,0,0,0,0,1,
                        1,0,0,0,0,0,1,
                        1,1,1,1,1,1,1,
                        1,0,0,0,0,0,1,
                        1,0,0,0,0,0,1,
                        0,1,1,1,1,1,0
                },
                // Г
                {
                        0,0,0,0,0,0,0,
                        1,1,1,1,1,1,0,
                        1,0,0,0,0,0,0,
                        1,0,0,0,0,0,0,
                        1,0,0,0,0,0,0,
                        1,0,0,0,0,0,0,
                        1,0,0,0,0,0,0
                },
                // Ґ
                {
                        0,0,0,0,0,0,1,
                        1,1,1,1,1,1,1,
                        1,0,0,0,0,0,0,
                        1,0,0,0,0,0,0,
                        1,0,0,0,0,0,0,
                        1,0,0,0,0,0,0,
                        1,0,0,0,0,0,0
                },
                // Д
                {
                        1,1,1,1,1,1,0,
                        1,0,0,0,0,1,0,
                        1,0,0,0,0,1,0,
                        1,0,0,0,0,1,0,
                        1,1,1,1,1,1,0,
                        1,0,0,0,0,0,1,
                        1,0,0,0,0,0,1
                },
                // Е
                {
                        1,1,1,1,1,1,1,
                        1,0,0,0,0,0,0,
                        1,0,0,0,0,0,0,
                        1,1,1,1,1,1,1,
                        1,0,0,0,0,0,0,
                        1,0,0,0,0,0,0,
                        1,1,1,1,1,1,1
                },
                // Є
                {
                        0,1,1,1,1,1,0,
                        1,0,0,0,0,0,1,
                        1,0,0,0,0,0,0,
                        1,1,1,1,1,1,1,
                        1,0,0,0,0,0,0,
                        1,0,0,0,0,0,1,
                        0,1,1,1,1,1,0
                },
                // Ж
                {
                        1,0,0,1,0,0,1,
                        1,1,0,1,0,1,1,
                        0,0,1,1,1,0,0,
                        0,0,0,1,0,0,0,
                        0,0,1,1,1,0,0,
                        0,1,0,1,0,1,0,
                        1,0,0,1,0,0,1
                },
                // З
                {
                        0,1,1,1,1,1,0,
                        1,0,0,0,0,0,1,
                        0,0,0,0,0,0,1,
                        1,1,1,1,1,1,1,
                        0,0,0,0,0,0,1,
                        1,0,0,0,0,0,1,
                        0,1,1,1,1,1,0
                },
                // И
                {
                        1,0,0,0,0,1,1,
                        1,0,0,0,0,1,1,
                        1,0,0,0,1,0,1,
                        1,0,0,1,0,0,1,
                        1,0,1,0,0,0,1,
                        1,1,0,0,0,0,1,
                        1,1,0,0,0,0,1
                },
                // І
                {
                        0,0,1,1,1,0,0,
                        0,0,0,0,0,0,0,
                        0,0,1,1,1,0,0,
                        0,0,1,1,1,0,0,
                        0,0,1,1,1,0,0,
                        0,0,1,1,1,0,0,
                        0,0,1,1,1,0,0
                },
                // Ї
                {
                        0,1,1,0,1,1,0,
                        0,0,0,0,0,0,0,
                        0,0,1,1,1,0,0,
                        0,0,1,1,1,0,0,
                        0,0,1,1,1,0,0,
                        0,0,1,1,1,0,0,
                        0,0,1,1,1,0,0
                },
                // Й
                {
                        0,1,1,1,1,1,0,
                        1,0,0,0,0,1,1,
                        1,0,0,0,1,1,1,
                        1,0,0,1,1,0,1,
                        1,0,1,1,0,0,1,
                        1,1,0,0,0,0,1,
                        1,1,0,0,0,0,1
                },
                // К
                {
                        1,0,0,0,0,1,1,
                        1,0,0,1,1,1,0,
                        1,0,1,1,0,0,0,
                        1,1,1,0,0,0,0,
                        1,0,1,0,1,0,0,
                        1,0,0,1,1,0,0,
                        1,0,0,0,1,1,1
                },
                // Л
                {
                        0,0,1,1,1,1,1,
                        0,1,1,1,1,1,1,
                        0,1,0,0,0,0,1,
                        0,1,0,0,0,0,1,
                        0,1,0,0,0,0,1,
                        0,1,0,0,0,0,1,
                        1,1,0,0,0,0,1
                },
                // М
                {
                        1,1,0,0,0,1,1,
                        1,0,1,0,1,0,1,
                        1,0,1,1,1,0,1,
                        1,0,0,1,0,0,1,
                        1,0,0,0,0,0,1,
                        1,0,0,0,0,0,1,
                        1,0,0,0,0,0,1
                },
                // Н
                {
                        1,0,0,0,0,0,1,
                        1,0,0,0,0,0,1,
                        1,0,0,0,0,0,1,
                        1,1,1,1,1,1,1,
                        1,0,0,0,0,0,1,
                        1,0,0,0,0,0,1,
                        1,0,0,0,0,0,1
                },
                // О
                {
                        1,1,1,1,1,1,1,
                        1,0,0,0,0,0,1,
                        1,0,0,0,0,0,1,
                        1,0,0,0,0,0,1,
                        1,0,0,0,0,0,1,
                        1,0,0,0,0,0,1,
                        1,1,1,1,1,1,1
                },
                // П
                {
                        1,1,1,1,1,1,1,
                        1,1,1,1,1,1,1,
                        1,1,0,0,0,1,1,
                        1,1,0,0,0,1,1,
                        1,1,0,0,0,1,1,
                        1,1,0,0,0,1,1,
                        1,1,0,0,0,1,1
                },
                // Р
                {
                        1,1,1,1,1,1,0,
                        1,0,0,0,0,1,0,
                        1,0,0,0,0,1,0,
                        1,1,1,1,1,1,0,
                        1,0,0,0,0,0,0,
                        1,0,0,0,0,0,0,
                        1,0,0,0,0,0,0
                },
                // С
                {
                        1,1,1,1,1,1,1,
                        1,0,0,0,0,0,0,
                        1,0,0,0,0,0,0,
                        1,0,0,0,0,0,0,
                        1,0,0,0,0,0,0,
                        1,0,0,0,0,0,0,
                        1,1,1,1,1,1,1
                },
                // Т
                {
                        1,1,1,1,1,1,1,
                        1,1,1,1,1,1,1,
                        0,0,0,1,0,0,0,
                        0,0,0,1,0,0,0,
                        0,0,0,1,0,0,0,
                        0,0,0,1,0,0,0,
                        0,0,0,1,0,0,0
                },
                // У
                {
                        1,0,0,0,0,0,1,
                        0,1,0,0,0,1,1,
                        0,0,1,1,1,0,0,
                        0,0,0,1,0,0,0,
                        0,0,1,0,0,0,0,
                        0,1,0,0,0,0,0,
                        1,0,0,0,0,0,0
                },
                // Ф
                {
                        1,1,1,1,1,1,1,
                        1,0,1,1,1,0,1,
                        1,1,1,1,1,1,1,
                        0,0,0,1,0,0,0,
                        0,0,0,1,0,0,0,
                        0,0,0,1,0,0,0,
                        0,0,0,1,0,0,0
                },
                // Х
                {
                        1,0,0,0,0,0,1,
                        1,1,0,0,0,1,1,
                        0,0,1,0,1,0,0,
                        0,0,0,1,0,0,0,
                        0,0,1,0,1,0,0,
                        0,1,0,0,0,1,0,
                        1,0,0,0,0,0,1
                },
                // Ц
                {
                        1,0,0,0,0,0,1,
                        1,0,0,0,0,0,1,
                        1,0,0,0,0,0,1,
                        1,0,0,0,0,0,1,
                        1,0,0,0,0,0,1,
                        1,1,1,1,1,1,1,
                        0,0,0,0,0,0,1
                },
                // Ч
                {
                        1,0,0,0,0,0,1,
                        1,0,0,0,0,0,1,
                        1,1,1,1,1,1,1,
                        0,0,0,0,0,1,1,
                        0,0,0,0,0,1,1,
                        0,0,0,0,0,1,1,
                        0,0,0,0,0,1,1
                },
                // Ш
                {
                        1,0,1,1,1,0,1,
                        1,0,1,1,1,0,1,
                        1,0,1,1,1,0,1,
                        1,0,1,1,1,0,1,
                        1,0,1,1,1,0,1,
                        1,1,1,1,1,1,1,
                        0,0,0,0,0,0,0
                },
                // Щ
                {
                        1,0,1,1,1,0,1,
                        1,0,1,1,1,0,1,
                        1,0,1,1,1,0,1,
                        1,0,1,1,1,0,1,
                        1,0,1,1,1,0,1,
                        1,1,1,1,1,1,1,
                        0,0,0,0,1,1,1
                },
                // Ь
                {
                        1,0,0,0,0,0,0,
                        1,0,0,0,0,0,0,
                        1,0,0,0,0,0,0,
                        1,1,1,1,1,1,0,
                        1,0,0,0,0,1,0,
                        1,0,0,0,0,1,0,
                        1,1,1,1,1,1,0
                },
                // Ю
                {
                        1,0,0,1,1,1,1,
                        1,0,0,1,0,0,1,
                        1,1,1,1,0,0,1,
                        1,1,1,1,0,0,1,
                        1,1,1,1,0,0,1,
                        1,0,0,1,0,0,1,
                        1,0,0,1,1,1,1
                },
                // Я
                {
                        0,0,1,1,1,1,1,
                        0,0,1,0,0,1,1,
                        0,0,1,0,0,1,1,
                        0,0,1,1,1,1,1,
                        0,1,1,1,0,1,1,
                        1,1,0,0,0,1,1,
                        1,0,0,0,0,1,1
                }
        };

        if (inputsList.length != NUM_LETTERS) {
            System.out.println("Кількість вхідних матриць не відповідає кількості букв!");
            return;
        }

        int[][] desiredOutputs = new int[NUM_LETTERS][NUM_LETTERS];
        for (int i = 0; i < NUM_LETTERS; i++) {
            desiredOutputs[i][i] = 1;
        }

        Perceptron perceptron = new Perceptron(INPUT_SIZE, NUM_LETTERS, LEARNING_RATE);

        perceptron.train(inputsList, desiredOutputs, MAX_EPOCHS, ERROR_THRESHOLD, ACCURACY_THRESHOLD);

        System.out.println("Тестування:");
        String[] letters = {
                "А", "Б", "В", "Г", "Ґ", "Д", "Е", "Є", "Ж", "З",
                "И", "І", "Ї", "Й", "К", "Л", "М", "Н", "О", "П",
                "Р", "С", "Т", "У", "Ф", "Х", "Ц", "Ч", "Ш", "Щ",
                "Ь", "Ю", "Я"
        };

        for (int i = 0; i < inputsList.length; i++) {
            double[] prediction = perceptron.predict(inputsList[i]);
            int predictedLetterIndex = -1;
            double maxOutput = -Double.MAX_VALUE;

            for (int j = 0; j < prediction.length; j++) {
                if (prediction[j] > maxOutput) {
                    maxOutput = prediction[j];
                    predictedLetterIndex = j;
                }
            }

            if (predictedLetterIndex != -1) {
                System.out.printf("Буква: %s -> Виявлена буква: %s (Очікувана: %s)\n",
                        letters[i], letters[predictedLetterIndex], letters[i]);
            } else {
                    System.out.printf("Буква: %s -> Виявлена буква: Невідома (Очікувана: %s)\n",
                                      letters[i], letters[i]);
            }

            System.out.println("Вихідні сигнали нейронів (%): ");
            for (double output : prediction) {
                System.out.printf("%.2f%% ", output * 100);
            }
            System.out.println("\n-----------------------------------------------");
        }
    }
}